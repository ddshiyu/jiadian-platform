var He=Object.defineProperty,Je=Object.defineProperties;var Ge=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var _e=(M,g,c)=>g in M?He(M,g,{enumerable:!0,configurable:!0,writable:!0,value:c}):M[g]=c,we=(M,g)=>{for(var c in g||(g={}))Ke.call(g,c)&&_e(M,c,g[c]);if(be)for(var c of be(g))Qe.call(g,c)&&_e(M,c,g[c]);return M},Se=(M,g)=>Je(M,Ge(g));var q=(M,g,c)=>new Promise((G,K)=>{var U=y=>{try{d(c.next(y))}catch(i){K(i)}},F=y=>{try{d(c.throw(y))}catch(i){K(i)}},d=y=>y.done?G(y.value):Promise.resolve(y.value).then(U,F);d((c=c.apply(M,g)).next())});import{az as We,ch as Xe,aA as X,aB as Ze,aC as D,aD as Z,aE as ie,aF as I,n as de,B as h,aG as et,aH as V,aI as Ce,aJ as ee,ci as he,cj as tt,o as k,aQ as at}from"./bootstrap-CkhoYbn7.js";import{a3 as lt,P as C,T as J,ao as rt,a4 as b,a5 as p,x as l,ah as a,aa as t,at as s,aK as _,aB as m,ae as T,au as u,bl as ot}from"../jse/index-index-tgD00c9V.js";import{f as nt,h as st,i as ut,j as it,r as dt,s as pt,k as mt}from"./operation-CvUUz8IX.js";import{C as Me,T as vt,a as Ne,P as ft}from"./index-CM5EcIbj.js";import{R as yt}from"./ReloadOutlined-BRI5VEPc.js";import{D as De,a as w}from"./index-CJOaX1-T.js";import{T as pe}from"./index-CpA7pp6p.js";import{P as Ie}from"./index-CuwfHHC9.js";import"./Dropdown-DX36wF3F.js";import"./index-BSMK-4s0.js";const ct={class:"table-header"},kt={class:"table-action"},gt={key:0},bt={key:1,class:"price"},_t={key:4},wt={key:0},St={key:0},Ct={key:1,class:"price"},ht={key:4},Mt={key:0},Nt={key:0},Dt={key:0,class:"product-info"},It=["src"],Tt={key:1,class:"price"},Ot={key:2,class:"price"},At={key:0},xt={key:1},Ft=lt({__name:"orders",setup(M){const{RangePicker:g}=We,c=Xe(),G=[{title:"订单信息",key:"orderInfo",width:200},{title:"订单金额",key:"amount",width:100},{title:"订单状态",key:"status",width:120},{title:"支付状态",key:"paymentStatus",width:120},{title:"时间信息",key:"time",width:200},{title:"操作",key:"action",width:200}],K=[{title:"商品信息",key:"product",width:"40%"},{title:"单价",key:"price",width:"15%"},{title:"数量",dataIndex:"quantity",key:"quantity",width:"15%"},{title:"金额",key:"total",width:"15%"}],U=C([]),F=C(!1),d=C(null),y=J({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`共 ${n} 条记录`}),i=J({orderNo:"",userName:"",status:"",paymentStatus:"",startDate:"",endDate:""}),$=C(void 0),Q=C(!1),L=C(!1),P=J({orderId:0,remark:""}),te=C(null),Te={remark:[{required:!0,message:"请输入订单备注",trigger:"blur",type:"string"}]},A=C(!1),E=C(!1),S=J({orderId:0,trackingNumber:"",trackingCompany:"",deliveryImages:[]}),ae=C(null),Oe={trackingNumber:[{required:!0,message:"请输入快递单号",trigger:"blur",type:"string"}],trackingCompany:[{required:!0,message:"请输入快递公司",trigger:"blur",type:"string"}]},z=C([]),Ae={Authorization:`Bearer ${c.accessToken}`},xe="https://qbylxb.cn/upload/image",Fe=n=>{const e=n.type==="image/jpeg"||n.type==="image/png";e||k.error("只能上传JPG或PNG格式的图片!");const r=n.size/1024/1024<2;return r||k.error("图片大小不能超过2MB!"),e&&r},Re=n=>{const e=[...n.fileList].slice(0,5);if(z.value=e,n.file.status==="done"){const r=n.file.response;r&&r.code===0?(S.deliveryImages=z.value.filter(o=>{var v,f,O;return((O=(f=(v=o.response)==null?void 0:v.data)==null?void 0:f.image)==null?void 0:O.url)||o.url}).map(o=>{var v,f,O;return`https://qbylxb.cn${(O=(f=(v=o.response)==null?void 0:v.data)==null?void 0:f.image)==null?void 0:O.url}`}),k.success(`${n.file.name} 上传成功`)):k.error(`${n.file.name} 上传失败`)}else n.file.status==="error"&&k.error(`${n.file.name} 上传失败`)},H=C(!1),N=J({orderId:0,status:"",remark:""}),le=C(null),Ue={status:[{required:!0,message:"请选择操作结果",trigger:"change",type:"string"}]},W=C("all"),$e=n=>{W.value=n,me()},x=()=>q(this,null,function*(){var n,e;F.value=!0;try{$.value&&$.value.length===2?(i.startDate=$.value[0].format("YYYY-MM-DD"),i.endDate=$.value[1].format("YYYY-MM-DD")):(i.startDate="",i.endDate="");const r={orderNo:i.orderNo,userName:i.userName,status:i.status||void 0,paymentStatus:i.paymentStatus||void 0,startDate:i.startDate||void 0,endDate:i.endDate||void 0,pageNum:y.current,pageSize:y.pageSize};try{const o=W.value==="refund"?yield nt(r):yield st(r);if(o)U.value=o.list||[],y.total=((n=o.pagination)==null?void 0:n.total)||0,y.current=((e=o.pagination)==null?void 0:e.current)||1;else throw new Error("获取订单列表失败: 空响应")}catch(o){console.error("获取订单API失败，使用模拟数据:",o),k.warning(`当前使用测试数据，接口异常：${o.message||o}`);let f=[...Pe()];i.orderNo&&(f=f.filter(Y=>Y.orderNo.includes(i.orderNo))),i.userName&&(f=f.filter(Y=>Y.userName.includes(i.userName))),i.status&&(f=f.filter(Y=>Y.status===i.status)),i.paymentStatus&&(f=f.filter(Y=>Y.paymentStatus===i.paymentStatus));const O=y.current||1,B=y.pageSize||10,j=(O-1)*B,Ee=j+B;U.value=f.slice(j,Ee),y.total=f.length}}catch(r){console.error("获取订单列表失败:",r),k.error("获取订单列表失败"),U.value=[],y.total=0}finally{F.value=!1}}),Pe=()=>{const n=["pending_payment","pending_delivery","delivered","completed","cancelled"],e=["unpaid","paid","refunded"],r=["normal","vip","wholesale"];return Array.from({length:25}).map((o,v)=>{const f=n[Math.floor(Math.random()*n.length)],O=f==="pending_payment"?"unpaid":f==="cancelled"?e[Math.floor(Math.random()*e.length)]:"paid",B={id:v+1,orderNo:`ORD${String(v+10001).padStart(5,"0")}`,userId:v+100,userName:`测试用户${v+1}`,totalAmount:Number(Math.floor(Math.random()*1e4)/100+100),orderType:r[Math.floor(Math.random()*r.length)],status:f,paymentStatus:O,paymentMethod:O==="unpaid"?void 0:"微信支付",paymentTime:O==="unpaid"?void 0:new Date(Date.now()-Math.random()*864e5*30).toISOString(),deliveryTime:["completed","delivered"].includes(f)?new Date(Date.now()-Math.random()*864e5*15).toISOString():void 0,completionTime:f==="completed"?new Date(Date.now()-Math.random()*864e5*5).toISOString():void 0,cancelTime:f==="cancelled"?new Date(Date.now()-Math.random()*864e5*10).toISOString():void 0,remark:Math.random()>.7?`订单备注${v+1}`:void 0,address:`测试地址${v+1}`,consignee:`收货人${v+1}`,phone:`1380000${String(v+1).padStart(4,"0")}`,createdAt:new Date(Date.now()-Math.random()*864e5*60).toISOString(),updatedAt:new Date(Date.now()-Math.random()*864e5*30).toISOString(),items:[{id:v*2+1,productId:v*3+100,productName:`测试商品${v*2+1}`,price:Math.floor(Math.random()*1e3)/100+50,quantity:Math.floor(Math.random()*5)+1,totalAmount:0,productCover:`https://via.placeholder.com/100?text=商品${v*2+1}`},{id:v*2+2,productId:v*3+101,productName:`测试商品${v*2+2}`,price:Math.floor(Math.random()*1e3)/100+50,quantity:Math.floor(Math.random()*5)+1,totalAmount:0,productCover:`https://via.placeholder.com/100?text=商品${v*2+2}`}]};return B.items=B.items.map(j=>Se(we({},j),{totalAmount:j.price*j.quantity})),B})},Ye=()=>{y.current=1,x()},me=()=>{Object.assign(i,{orderNo:"",userName:"",status:"",paymentStatus:"",startDate:"",endDate:""}),$.value=void 0,y.current=1,x()},ve=n=>{y.current=n.current,y.pageSize=n.pageSize,x()},fe=n=>q(this,null,function*(){try{F.value=!0;try{const e=yield ut(n.id);if(e)d.value=e,Q.value=!0;else throw new Error("订单详情获取失败: 空响应")}catch(e){console.error("获取订单详情API失败，使用模拟数据:",e),k.warning(`当前使用测试数据，接口异常：${e.message||e}`),d.value=n,Q.value=!0}}catch(e){console.error("获取订单详情失败:",e),k.error("获取订单详情失败")}finally{F.value=!1}}),ye=n=>q(this,null,function*(){try{yield it(n.id,"管理员取消"),k.success("订单已取消"),x()}catch(e){console.error("取消订单失败:",e),k.error("取消订单失败")}}),ce=n=>{P.orderId=n.id,P.remark=n.remark||"",L.value=!0},qe=()=>{L.value=!1},ze=()=>q(this,null,function*(){if(te.value)try{yield te.value.validate(),A.value=!0,yield dt(P.orderId,P.remark),k.success("备注成功"),L.value=!1,x()}catch(n){console.error("备注失败:",n),k.error("备注失败")}finally{A.value=!1}}),ke=n=>{S.orderId=n.id,S.trackingNumber="",S.trackingCompany="",S.deliveryImages=[],z.value=[],E.value=!0},Be=()=>{E.value=!1},je=()=>q(this,null,function*(){if(ae.value)try{yield ae.value.validate(),A.value=!0,yield pt(S.orderId,S.trackingNumber,S.trackingCompany,S.deliveryImages),k.success("发货成功"),E.value=!1,x()}catch(n){console.error("发货失败:",n),k.error("发货失败")}finally{A.value=!1}}),ge=n=>{N.orderId=n.id,N.status="",N.remark="",H.value=!0},Ve=()=>{H.value=!1},Le=()=>q(this,null,function*(){if(le.value)try{yield le.value.validate(),A.value=!0;const n=N.status,e=N.remark||void 0;yield mt(N.orderId,n,e),k.success(N.status==="approved"?"退款申请已通过":"退款申请已拒绝"),H.value=!1,x()}catch(n){console.error("处理退款失败:",n),k.error("处理退款失败")}finally{A.value=!1}}),R=n=>n?ot(n).format("YYYY-MM-DD HH:mm:ss"):"",re=n=>({pending_payment:"待支付",pending_delivery:"待发货",delivered:"已发货",completed:"已完成",cancelled:"已取消",refund_pending:"退款处理中",refund_approved:"退款已通过",refund_rejected:"退款已拒绝"})[n]||n,oe=n=>({pending_payment:"orange",pending_delivery:"blue",delivered:"cyan",completed:"green",cancelled:"red",refund_pending:"gold",refund_approved:"purple",refund_rejected:"volcano"})[n]||"default",ne=n=>({unpaid:"未支付",paid:"已支付",refunded:"已退款"})[n]||n,se=n=>({unpaid:"orange",paid:"green",refunded:"purple"})[n]||"default",ue=n=>n?{normal:"普通订单",vip:"VIP订单",wholesale:"批发订单"}[n]||n:"-";return rt(()=>{x()}),(n,e)=>(p(),b("div",null,[l(t(Me),{bordered:!1,class:"mb-20"},{default:a(()=>[l(t(X),{model:i,layout:"inline",class:"search-form",onSubmit:Ze(Ye,["prevent"])},{default:a(()=>[l(t(D),{label:"订单号"},{default:a(()=>[l(t(Z),{value:i.orderNo,"onUpdate:value":e[0]||(e[0]=r=>i.orderNo=r),placeholder:"请输入订单号","allow-clear":""},null,8,["value"])]),_:1}),l(t(D),{label:"用户名"},{default:a(()=>[l(t(Z),{value:i.userName,"onUpdate:value":e[1]||(e[1]=r=>i.userName=r),placeholder:"请输入用户名","allow-clear":""},null,8,["value"])]),_:1}),l(t(D),{label:"订单状态"},{default:a(()=>[l(t(ie),{value:i.status,"onUpdate:value":e[2]||(e[2]=r=>i.status=r),placeholder:"请选择订单状态",style:{width:"160px"},"allow-clear":""},{default:a(()=>[l(t(I),{value:""},{default:a(()=>e[16]||(e[16]=[s("全部")])),_:1}),l(t(I),{value:"pending_payment"},{default:a(()=>e[17]||(e[17]=[s("待支付")])),_:1}),l(t(I),{value:"pending_delivery"},{default:a(()=>e[18]||(e[18]=[s("待发货")])),_:1}),l(t(I),{value:"delivered"},{default:a(()=>e[19]||(e[19]=[s("已发货")])),_:1}),l(t(I),{value:"completed"},{default:a(()=>e[20]||(e[20]=[s("已完成")])),_:1}),l(t(I),{value:"cancelled"},{default:a(()=>e[21]||(e[21]=[s("已取消")])),_:1})]),_:1},8,["value"])]),_:1}),l(t(D),{label:"支付状态"},{default:a(()=>[l(t(ie),{value:i.paymentStatus,"onUpdate:value":e[3]||(e[3]=r=>i.paymentStatus=r),placeholder:"请选择支付状态",style:{width:"140px"},"allow-clear":""},{default:a(()=>[l(t(I),{value:""},{default:a(()=>e[22]||(e[22]=[s("全部")])),_:1}),l(t(I),{value:"unpaid"},{default:a(()=>e[23]||(e[23]=[s("未支付")])),_:1}),l(t(I),{value:"paid"},{default:a(()=>e[24]||(e[24]=[s("已支付")])),_:1}),l(t(I),{value:"refunded"},{default:a(()=>e[25]||(e[25]=[s("已退款")])),_:1})]),_:1},8,["value"])]),_:1}),l(t(D),{label:"下单时间"},{default:a(()=>[l(t(g),{value:$.value,"onUpdate:value":e[4]||(e[4]=r=>$.value=r),format:"YYYY-MM-DD",placeholder:["开始日期","结束日期"],style:{width:"240px"}},null,8,["value"])]),_:1}),l(t(D),null,{default:a(()=>[l(t(de),null,{default:a(()=>[l(t(h),{type:"primary","html-type":"submit"},{default:a(()=>e[26]||(e[26]=[s("查询")])),_:1}),l(t(h),{onClick:me},{default:a(()=>e[27]||(e[27]=[s("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(t(Me),{bordered:!1},{default:a(()=>[_("div",ct,[e[28]||(e[28]=_("div",{class:"table-title"},"订单列表",-1)),_("div",kt,[l(t(et),{title:"刷新"},{default:a(()=>[l(t(h),{onClick:x},{icon:a(()=>[l(t(yt))]),_:1})]),_:1})])]),l(t(vt),{"active-key":W.value,"onUpdate:activeKey":e[5]||(e[5]=r=>W.value=r),onChange:$e},{default:a(()=>[l(t(Ne),{tab:"所有订单",key:"all"},{default:a(()=>[l(t(pe),{columns:G,"data-source":U.value,loading:F.value,pagination:y,onChange:ve,"row-key":"id"},{bodyCell:a(({column:r,record:o})=>[r.key==="orderInfo"?(p(),b("div",gt,[_("div",null,"订单号: "+u(o.orderNo),1),_("div",null,"用户: "+u(o.userName),1),_("div",null,"类型: "+u(ue(o.orderType)),1)])):m("",!0),r.key==="amount"?(p(),b("div",bt," ¥"+u(Number(o.totalAmount).toFixed(2)),1)):m("",!0),r.key==="status"?(p(),T(t(V),{key:2,color:oe(o.status)},{default:a(()=>[s(u(re(o.status)),1)]),_:2},1032,["color"])):m("",!0),r.key==="paymentStatus"?(p(),T(t(V),{key:3,color:se(o.paymentStatus)},{default:a(()=>[s(u(ne(o.paymentStatus)),1)]),_:2},1032,["color"])):m("",!0),r.key==="time"?(p(),b("div",_t,[_("div",null,"下单: "+u(R(o.createdAt)),1),o.paymentTime?(p(),b("div",wt," 支付: "+u(R(o.paymentTime)),1)):m("",!0)])):m("",!0),r.key==="action"?(p(),T(t(de),{key:5},{default:a(()=>[l(t(h),{type:"link",onClick:()=>fe(o)},{default:a(()=>e[29]||(e[29]=[s(" 详情 ")])),_:2},1032,["onClick"]),o.status==="pending_payment"?(p(),T(t(Ie),{key:0,title:"确定取消该订单吗？",onConfirm:()=>ye(o),"ok-text":"确定","cancel-text":"取消"},{default:a(()=>[l(t(h),{type:"link",danger:""},{default:a(()=>e[30]||(e[30]=[s("取消订单")])),_:1})]),_:2},1032,["onConfirm"])):m("",!0),o.status==="pending_delivery"?(p(),T(t(h),{key:1,type:"link",onClick:()=>ke(o)},{default:a(()=>e[31]||(e[31]=[s(" 发货 ")])),_:2},1032,["onClick"])):m("",!0),o.status==="refund_pending"?(p(),T(t(h),{key:2,type:"link",onClick:()=>ge(o)},{default:a(()=>e[32]||(e[32]=[s(" 处理退款 ")])),_:2},1032,["onClick"])):m("",!0),l(t(h),{type:"link",onClick:()=>ce(o)},{default:a(()=>e[33]||(e[33]=[s(" 备注 ")])),_:2},1032,["onClick"])]),_:2},1024)):m("",!0)]),_:1},8,["data-source","loading","pagination"])]),_:1}),l(t(Ne),{tab:"退款订单",key:"refund"},{default:a(()=>[l(t(pe),{columns:G,"data-source":U.value,loading:F.value,pagination:y,onChange:ve,"row-key":"id"},{bodyCell:a(({column:r,record:o})=>[r.key==="orderInfo"?(p(),b("div",St,[_("div",null,"订单号: "+u(o.orderNo),1),_("div",null,"用户: "+u(o.userName),1),_("div",null,"类型: "+u(ue(o.orderType)),1)])):m("",!0),r.key==="amount"?(p(),b("div",Ct," ¥"+u(Number(o.totalAmount).toFixed(2)),1)):m("",!0),r.key==="status"?(p(),T(t(V),{key:2,color:oe(o.status)},{default:a(()=>[s(u(re(o.status)),1)]),_:2},1032,["color"])):m("",!0),r.key==="paymentStatus"?(p(),T(t(V),{key:3,color:se(o.paymentStatus)},{default:a(()=>[s(u(ne(o.paymentStatus)),1)]),_:2},1032,["color"])):m("",!0),r.key==="time"?(p(),b("div",ht,[_("div",null,"下单: "+u(R(o.createdAt)),1),o.paymentTime?(p(),b("div",Mt," 支付: "+u(R(o.paymentTime)),1)):m("",!0)])):m("",!0),r.key==="action"?(p(),T(t(de),{key:5},{default:a(()=>[l(t(h),{type:"link",onClick:()=>fe(o)},{default:a(()=>e[34]||(e[34]=[s(" 详情 ")])),_:2},1032,["onClick"]),o.status==="pending_payment"?(p(),T(t(Ie),{key:0,title:"确定取消该订单吗？",onConfirm:()=>ye(o),"ok-text":"确定","cancel-text":"取消"},{default:a(()=>[l(t(h),{type:"link",danger:""},{default:a(()=>e[35]||(e[35]=[s("取消订单")])),_:1})]),_:2},1032,["onConfirm"])):m("",!0),o.status==="pending_delivery"?(p(),T(t(h),{key:1,type:"link",onClick:()=>ke(o)},{default:a(()=>e[36]||(e[36]=[s(" 发货 ")])),_:2},1032,["onClick"])):m("",!0),o.status==="refund_pending"?(p(),T(t(h),{key:2,type:"link",onClick:()=>ge(o)},{default:a(()=>e[37]||(e[37]=[s(" 处理退款 ")])),_:2},1032,["onClick"])):m("",!0),l(t(h),{type:"link",onClick:()=>ce(o)},{default:a(()=>e[38]||(e[38]=[s(" 备注 ")])),_:2},1032,["onClick"])]),_:2},1024)):m("",!0)]),_:1},8,["data-source","loading","pagination"])]),_:1})]),_:1},8,["active-key"])]),_:1}),l(t(ee),{visible:Q.value,"onUpdate:visible":e[6]||(e[6]=r=>Q.value=r),title:"订单详情",width:"800px",footer:null,"mask-closable":!0},{default:a(()=>[d.value?(p(),b("div",Nt,[l(t(De),{title:"基本信息",bordered:"",column:2},{default:a(()=>[l(t(w),{label:"订单号"},{default:a(()=>[s(u(d.value.orderNo),1)]),_:1}),l(t(w),{label:"下单时间"},{default:a(()=>[s(u(R(d.value.createdAt)),1)]),_:1}),l(t(w),{label:"用户"},{default:a(()=>{var r,o;return[s(u((o=(r=d.value)==null?void 0:r.User)==null?void 0:o.nickname),1)]}),_:1}),l(t(w),{label:"总金额"},{default:a(()=>[s(" ¥"+u(Number(d.value.totalAmount).toFixed(2)),1)]),_:1}),l(t(w),{label:"订单类型"},{default:a(()=>[s(u(ue(d.value.orderType)),1)]),_:1}),l(t(w),{label:"订单状态"},{default:a(()=>[l(t(V),{color:oe(d.value.status)},{default:a(()=>[s(u(re(d.value.status)),1)]),_:1},8,["color"])]),_:1}),l(t(w),{label:"支付状态"},{default:a(()=>[l(t(V),{color:se(d.value.paymentStatus)},{default:a(()=>[s(u(ne(d.value.paymentStatus)),1)]),_:1},8,["color"])]),_:1}),l(t(w),{label:"支付方式",span:2},{default:a(()=>[s(u(d.value.paymentMethod||"-"),1)]),_:1}),l(t(w),{label:"支付时间",span:2},{default:a(()=>[s(u(d.value.paymentTime?R(d.value.paymentTime):"-"),1)]),_:1}),l(t(w),{label:"发货时间",span:2},{default:a(()=>[s(u(d.value.deliveryTime?R(d.value.deliveryTime):"-"),1)]),_:1}),l(t(w),{label:"完成时间",span:2},{default:a(()=>[s(u(d.value.completionTime?R(d.value.completionTime):"-"),1)]),_:1}),l(t(w),{label:"备注",span:2},{default:a(()=>[s(u(d.value.remark||"-"),1)]),_:1})]),_:1}),l(t(Ce)),l(t(De),{title:"收货信息",bordered:"",column:1},{default:a(()=>[l(t(w),{label:"收货人"},{default:a(()=>[s(u(d.value.consignee||"-"),1)]),_:1}),l(t(w),{label:"联系电话"},{default:a(()=>[s(u(d.value.phone||"-"),1)]),_:1}),l(t(w),{label:"收货地址"},{default:a(()=>[s(u(d.value.address||"-"),1)]),_:1})]),_:1}),l(t(Ce)),e[39]||(e[39]=_("h3",null,"商品信息",-1)),l(t(pe),{columns:K,"data-source":d.value.items,pagination:!1,"row-key":"id"},{bodyCell:a(({column:r,record:o})=>[r.key==="product"?(p(),b("div",Dt,[o.productCover?(p(),b("img",{key:0,src:o.productCover,alt:"商品图片",class:"product-img"},null,8,It)):m("",!0),_("div",null,u(o.productName),1)])):m("",!0),r.key==="price"?(p(),b("div",Tt,"¥"+u(Number(o.price).toFixed(2)),1)):m("",!0),r.key==="total"?(p(),b("div",Ot," ¥"+u(Number(o.totalAmount).toFixed(2)),1)):m("",!0)]),_:1},8,["data-source"])])):m("",!0)]),_:1},8,["visible"]),l(t(ee),{visible:L.value,"onUpdate:visible":e[8]||(e[8]=r=>L.value=r),title:"订单备注",onOk:ze,"confirm-loading":A.value,onCancel:qe,"ok-text":"确定","cancel-text":"取消"},{default:a(()=>[l(t(X),{ref_key:"remarkFormRef",ref:te,model:P,rules:Te,"label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[l(t(D),{label:"备注",name:"remark"},{default:a(()=>[l(t(he),{value:P.remark,"onUpdate:value":e[7]||(e[7]=r=>P.remark=r),placeholder:"请输入订单备注",rows:4},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","confirm-loading"]),l(t(ee),{visible:E.value,"onUpdate:visible":e[12]||(e[12]=r=>E.value=r),title:"订单发货",onOk:je,"confirm-loading":A.value,onCancel:Be,"ok-text":"确定","cancel-text":"取消"},{default:a(()=>[l(t(X),{ref_key:"shipFormRef",ref:ae,model:S,rules:Oe,"label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[l(t(D),{label:"快递公司",name:"trackingCompany"},{default:a(()=>[l(t(Z),{value:S.trackingCompany,"onUpdate:value":e[9]||(e[9]=r=>S.trackingCompany=r),placeholder:"请输入快递公司名称"},null,8,["value"])]),_:1}),l(t(D),{label:"快递单号",name:"trackingNumber"},{default:a(()=>[l(t(Z),{value:S.trackingNumber,"onUpdate:value":e[10]||(e[10]=r=>S.trackingNumber=r),placeholder:"请输入快递单号"},null,8,["value"])]),_:1}),l(t(D),{label:"发货图片"},{default:a(()=>[l(t(tt),{"file-list":z.value,"onUpdate:fileList":e[11]||(e[11]=r=>z.value=r),"list-type":"picture-card",action:xe,headers:Ae,name:"image","before-upload":Fe,onChange:Re},{default:a(()=>[z.value.length>=5?(p(),b("div",At,e[40]||(e[40]=[_("div",null,"最多上传5张",-1)]))):(p(),b("div",xt,[l(t(ft)),e[41]||(e[41]=_("div",{style:{"margin-top":"8px"}},"上传",-1))]))]),_:1},8,["file-list"]),e[42]||(e[42]=_("div",{class:"upload-hint"}," 请上传发货图片，最多5张，支持jpg、png格式 ",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","confirm-loading"]),l(t(ee),{visible:H.value,"onUpdate:visible":e[15]||(e[15]=r=>H.value=r),title:"处理退款申请",onOk:Le,"confirm-loading":A.value,onCancel:Ve,"ok-text":"确定","cancel-text":"取消"},{default:a(()=>[l(t(X),{ref_key:"statusFormRef",ref:le,model:N,rules:Ue,"label-col":{span:4},"wrapper-col":{span:18}},{default:a(()=>[l(t(D),{label:"操作结果",name:"status"},{default:a(()=>[l(t(ie),{value:N.status,"onUpdate:value":e[13]||(e[13]=r=>N.status=r),placeholder:"请选择操作结果"},{default:a(()=>[l(t(I),{value:"approved"},{default:a(()=>e[43]||(e[43]=[s("通过")])),_:1}),l(t(I),{value:"rejected"},{default:a(()=>e[44]||(e[44]=[s("拒绝")])),_:1})]),_:1},8,["value"])]),_:1}),l(t(D),{label:"备注",name:"remark"},{default:a(()=>[l(t(he),{value:N.remark,"onUpdate:value":e[14]||(e[14]=r=>N.remark=r),placeholder:"请输入备注",rows:4},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","confirm-loading"])]))}}),Et=at(Ft,[["__scopeId","data-v-76364ead"]]);export{Et as default};
