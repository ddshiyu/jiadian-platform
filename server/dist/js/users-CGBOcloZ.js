var C=Object.defineProperty;var k=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var w=(m,d,n)=>d in m?C(m,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):m[d]=n,S=(m,d)=>{for(var n in d||(d={}))L.call(d,n)&&w(m,n,d[n]);if(k)for(var n of k(d))M.call(d,n)&&w(m,n,d[n]);return m};var c=(m,d,n)=>new Promise((g,y)=>{var p=i=>{try{b(n.next(i))}catch(I){y(I)}},a=i=>{try{b(n.throw(i))}catch(I){y(I)}},b=i=>i.done?g(i.value):Promise.resolve(i.value).then(p,a);b((n=n.apply(m,d)).next())});import{T as R,d as P,k as O,l as B}from"./operation-Cao-9zmS.js";import{aD as o,aI as v,aG as q,aL as D,o as U,aJ as A,aM as F}from"./bootstrap-DQlkkZAY.js";import{a3 as V,P as f,ao as $,a4 as E,a5 as G,aK as h,x as u,aa as t,ah as s,k as x}from"../jse/index-index-_HsMvMo5.js";import"./Dropdown-BE9qtqDz.js";const J={class:"users-container"},K=V({__name:"users",setup(m){const d=f([]),n=f(!1),g=f(!1),y=f(),p=f({current:1,pageSize:10,total:0,showSizeChanger:!0,showTotal:r=>`共 ${r} 条`}),a=f({trueName:"",photoUrl:"",gender:0,age:0,location:"",industry:"",companyName:"",jobName:"",phoneNumber:"",wxNumber:"",companyScale:"",revenueScale:"",personalProfile:"",appeals:"",advantage:"",userLevel:0,status:0}),b=[{label:"男",value:1},{label:"女",value:2}],i=[{label:"正常",value:1},{label:"禁用",value:0}],I=[{label:"会员",value:1},{label:"非会员",value:0}],T=[{title:"姓名",dataIndex:"trueName",key:"trueName"},{title:"头像",dataIndex:"photoUrl",key:"photoUrl",customRender:({text:r})=>r?x("img",{src:r,style:"width: 40px; height: 40px; border-radius: 50%; object-fit: cover;"}):"无"},{title:"性别",dataIndex:"gender",key:"gender",customRender:({text:r})=>{const e=b.find(l=>l.value===r);return e?e.label:"未知"}},{title:"年龄",dataIndex:"age",key:"age"},{title:"地区",dataIndex:"location",key:"location"},{title:"行业",dataIndex:"industry",key:"industry"},{title:"公司",dataIndex:"companyName",key:"companyName"},{title:"职位",dataIndex:"jobName",key:"jobName"},{title:"手机号",dataIndex:"phoneNumber",key:"phoneNumber"},{title:"微信号",dataIndex:"wxNumber",key:"wxNumber"},{title:"会员状态",dataIndex:"userLevel",key:"userLevel",customRender:({text:r})=>{const e=I.find(l=>l.value===r);return x(A,{color:r===1?"gold":"default"},()=>(e==null?void 0:e.label)||"未知")}},{title:"状态",dataIndex:"status",key:"status",customRender:({text:r})=>x(A,{color:r===0?"success":"error"},r===0?"激活":"禁用")}],N=()=>c(this,null,function*(){n.value=!0;try{const r=yield P({pageNum:p.value.current,pageSize:p.value.pageSize});d.value=r.row,p.value.total=r.total}catch(r){U.error("获取数据失败")}finally{n.value=!1}}),j=r=>{p.value.current=r.current,p.value.pageSize=r.pageSize,N()},z=()=>c(this,null,function*(){try{yield y.value.validateFields();const r=S({},a.value);yield a.value.cardId?O(r):B(r),U.success("保存成功"),g.value=!1,yield N()}catch(r){U.error("保存失败")}});return $(()=>{N()}),(r,e)=>(G(),E("div",J,[e[18]||(e[18]=h("div",{class:"header"},[h("h1",null,"用户管理")],-1)),u(t(R),{columns:T,"data-source":d.value,loading:n.value,"row-key":"cardId",pagination:p.value,onChange:j},null,8,["data-source","loading","pagination"]),u(t(D),{visible:g.value,"onUpdate:visible":e[16]||(e[16]=l=>g.value=l),title:a.value.cardId?"编辑用户":"新增用户",onOk:z,onCancel:e[17]||(e[17]=()=>g.value=!1)},{default:s(()=>[u(t(o),{ref_key:"formRef",ref:y,model:a.value,layout:"vertical"},{default:s(()=>[u(t(o).Item,{name:"trueName",label:"姓名",rules:[{required:!0,message:"请输入姓名"}]},{default:s(()=>[u(t(v),{value:a.value.trueName,"onUpdate:value":e[0]||(e[0]=l=>a.value.trueName=l),placeholder:"请输入姓名"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"photoUrl",label:"头像",rules:[{required:!0,message:"请上传头像"}]},{default:s(()=>[u(t(v),{value:a.value.photoUrl,"onUpdate:value":e[1]||(e[1]=l=>a.value.photoUrl=l),placeholder:"请输入头像链接"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{default:s(()=>[u(t(q),{value:a.value.gender,"onUpdate:value":e[2]||(e[2]=l=>a.value.gender=l),options:b},null,8,["value"])]),_:1}),u(t(o).Item,{name:"age",label:"年龄",rules:[{required:!0,message:"请输入年龄"}]},{default:s(()=>[u(t(v),{value:a.value.age,"onUpdate:value":e[3]||(e[3]=l=>a.value.age=l),type:"number",placeholder:"请输入年龄"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"location",label:"地区",rules:[{required:!0,message:"请输入地区"}]},{default:s(()=>[u(t(v),{value:a.value.location,"onUpdate:value":e[4]||(e[4]=l=>a.value.location=l),placeholder:"请输入地区"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"industry",label:"行业",rules:[{required:!0,message:"请输入行业"}]},{default:s(()=>[u(t(v),{value:a.value.industry,"onUpdate:value":e[5]||(e[5]=l=>a.value.industry=l),placeholder:"请输入行业"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"companyName",label:"公司名称",rules:[{required:!0,message:"请输入公司名称"}]},{default:s(()=>[u(t(v),{value:a.value.companyName,"onUpdate:value":e[6]||(e[6]=l=>a.value.companyName=l),placeholder:"请输入公司名称"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"jobName",label:"职位",rules:[{required:!0,message:"请输入职位"}]},{default:s(()=>[u(t(v),{value:a.value.jobName,"onUpdate:value":e[7]||(e[7]=l=>a.value.jobName=l),placeholder:"请输入职位"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"phoneNumber",label:"手机号",rules:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式"}]},{default:s(()=>[u(t(v),{value:a.value.phoneNumber,"onUpdate:value":e[8]||(e[8]=l=>a.value.phoneNumber=l),placeholder:"请输入手机号"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"wxNumber",label:"微信号",rules:[{required:!0,message:"请输入微信号"}]},{default:s(()=>[u(t(v),{value:a.value.wxNumber,"onUpdate:value":e[9]||(e[9]=l=>a.value.wxNumber=l),placeholder:"请输入微信号"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"companyScale",label:"公司规模",rules:[{required:!0,message:"请输入公司规模"}]},{default:s(()=>[u(t(v),{value:a.value.companyScale,"onUpdate:value":e[10]||(e[10]=l=>a.value.companyScale=l),placeholder:"请输入公司规模"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"revenueScale",label:"营收规模",rules:[{required:!0,message:"请输入营收规模"}]},{default:s(()=>[u(t(v),{value:a.value.revenueScale,"onUpdate:value":e[11]||(e[11]=l=>a.value.revenueScale=l),placeholder:"请输入营收规模"},null,8,["value"])]),_:1}),u(t(o).Item,{name:"personalProfile",label:"个人简介",rules:[{required:!0,message:"请输入个人简介"}]},{default:s(()=>[u(t(v).TextArea,{value:a.value.personalProfile,"onUpdate:value":e[12]||(e[12]=l=>a.value.personalProfile=l),placeholder:"请输入个人简介",rows:4},null,8,["value"])]),_:1}),u(t(o).Item,{name:"appeals",label:"诉求",rules:[{required:!0,message:"请输入诉求"}]},{default:s(()=>[u(t(v).TextArea,{value:a.value.appeals,"onUpdate:value":e[13]||(e[13]=l=>a.value.appeals=l),placeholder:"请输入诉求",rows:4},null,8,["value"])]),_:1}),u(t(o).Item,{name:"advantage",label:"优势",rules:[{required:!0,message:"请输入优势"}]},{default:s(()=>[u(t(v).TextArea,{value:a.value.advantage,"onUpdate:value":e[14]||(e[14]=l=>a.value.advantage=l),placeholder:"请输入优势",rows:4},null,8,["value"])]),_:1}),u(t(o).Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态"}]},{default:s(()=>[u(t(q),{value:a.value.status,"onUpdate:value":e[15]||(e[15]=l=>a.value.status=l),options:i},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])]))}}),Z=F(K,[["__scopeId","data-v-72d7df55"]]);export{Z as default};
