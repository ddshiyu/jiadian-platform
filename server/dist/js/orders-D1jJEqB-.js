var Je=Object.defineProperty,He=Object.defineProperties;var Ge=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var Se=(M,b,k)=>b in M?Je(M,b,{enumerable:!0,configurable:!0,writable:!0,value:k}):M[b]=k,we=(M,b)=>{for(var k in b||(b={}))Qe.call(b,k)&&Se(M,k,b[k]);if(he)for(var k of he(b))Ke.call(b,k)&&Se(M,k,b[k]);return M},Ce=(M,b)=>He(M,Ge(b));var q=(M,b,k)=>new Promise((G,Q)=>{var U=y=>{try{i(k.next(y))}catch(d){Q(d)}},R=y=>{try{i(k.throw(y))}catch(d){Q(d)}},i=y=>y.done?G(y.value):Promise.resolve(y.value).then(U,R);i((k=k.apply(M,b)).next())});import{N as We,O as Xe,P as X,Q as Ze,R as D,U as Z,W as ie,X as I,S as de,B as C,Y as et,Z as z,a0 as pe,a1 as ee,a2 as Me,a3 as tt,b as g,_ as at}from"./bootstrap-22b2dTij.js";import{d as lt,r as w,I as H,o as rt,a as _,b as m,A as a,z as l,g as t,B as s,f as h,e as v,l as T,t as u,J as ot}from"../jse/index-index-DVLJeVLU.js";import{g as nt,a as st,b as ut,c as it,r as dt,s as pt,h as mt}from"./operation-WY1WVt23.js";import{C as Ne,T as vt,a as De,P as ft}from"./index-CyfVSpMd.js";import{R as yt}from"./ReloadOutlined-CBZyWG87.js";import{D as me,a as c}from"./index-CRYgzXqG.js";import{T as ve}from"./index-CEto9hXs.js";import{P as Ie}from"./index-BKUTniRz.js";const ct={class:"table-header"},kt={class:"table-action"},gt={key:0},bt={key:1,class:"price"},_t={key:4},ht={key:0},St={key:0},wt={key:1,class:"price"},Ct={key:4},Mt={key:0},Nt={key:0},Dt={key:0,class:"product-info"},It=["src"],Tt={key:1,class:"price"},Ot={key:2,class:"price"},At={key:0},$t={key:1},Rt=lt({__name:"orders",setup(M){const{RangePicker:b}=We,k=Xe(),G=[{title:"订单信息",key:"orderInfo",width:200},{title:"订单金额",key:"amount",width:100},{title:"订单状态",key:"status",width:120},{title:"支付状态",key:"paymentStatus",width:120},{title:"时间信息",key:"time",width:200},{title:"操作",key:"action",width:200}],Q=[{title:"商品信息",key:"product",width:"40%"},{title:"单价",key:"price",width:"15%"},{title:"数量",dataIndex:"quantity",key:"quantity",width:"15%"},{title:"金额",key:"total",width:"15%"}],U=w([]),R=w(!1),i=w(null),y=H({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`共 ${n} 条记录`}),d=H({orderNo:"",userName:"",status:"",paymentStatus:"",startDate:"",endDate:""}),x=w(void 0),K=w(!1),j=w(!1),Y=H({orderId:0,remark:""}),te=w(null),Te={remark:[{required:!0,message:"请输入订单备注",trigger:"blur",type:"string"}]},A=w(!1),E=w(!1),S=H({orderId:0,trackingNumber:"",trackingCompany:"",deliveryImages:[]}),ae=w(null),Oe={trackingNumber:[{required:!0,message:"请输入快递单号",trigger:"blur",type:"string"}],trackingCompany:[{required:!0,message:"请输入快递公司",trigger:"blur",type:"string"}]},B=w([]),Ae={Authorization:`Bearer ${k.accessToken}`},$e="https://qbylxb.cn/upload/image",Re=n=>{const e=n.type==="image/jpeg"||n.type==="image/png";e||g.error("只能上传JPG或PNG格式的图片!");const r=n.size/1024/1024<2;return r||g.error("图片大小不能超过2MB!"),e&&r},Fe=n=>{const e=[...n.fileList].slice(0,5);if(B.value=e,n.file.status==="done"){const r=n.file.response;r&&r.code===0?(S.deliveryImages=B.value.filter(o=>{var p,f,O;return((O=(f=(p=o.response)==null?void 0:p.data)==null?void 0:f.image)==null?void 0:O.url)||o.url}).map(o=>{var p,f,O;return`https://qbylxb.cn${(O=(f=(p=o.response)==null?void 0:p.data)==null?void 0:f.image)==null?void 0:O.url}`}),g.success(`${n.file.name} 上传成功`)):g.error(`${n.file.name} 上传失败`)}else n.file.status==="error"&&g.error(`${n.file.name} 上传失败`)},J=w(!1),N=H({orderId:0,status:"",remark:""}),le=w(null),Ue={status:[{required:!0,message:"请选择操作结果",trigger:"change",type:"string"}]},W=w("all"),xe=n=>{W.value=n,fe()},$=()=>q(this,null,function*(){var n,e;R.value=!0;try{x.value&&x.value.length===2?(d.startDate=x.value[0].format("YYYY-MM-DD"),d.endDate=x.value[1].format("YYYY-MM-DD")):(d.startDate="",d.endDate="");const r={orderNo:d.orderNo,userName:d.userName,status:d.status||void 0,paymentStatus:d.paymentStatus||void 0,startDate:d.startDate||void 0,endDate:d.endDate||void 0,pageNum:y.current,pageSize:y.pageSize};try{const o=W.value==="refund"?yield nt(r):yield st(r);if(o)U.value=o.list||[],y.total=((n=o.pagination)==null?void 0:n.total)||0,y.current=((e=o.pagination)==null?void 0:e.current)||1;else throw new Error("获取订单列表失败: 空响应")}catch(o){console.error("获取订单API失败，使用模拟数据:",o),g.warning(`当前使用测试数据，接口异常：${o.message||o}`);let f=[...Ye()];d.orderNo&&(f=f.filter(P=>P.orderNo.includes(d.orderNo))),d.userName&&(f=f.filter(P=>P.userName.includes(d.userName))),d.status&&(f=f.filter(P=>P.status===d.status)),d.paymentStatus&&(f=f.filter(P=>P.paymentStatus===d.paymentStatus));const O=y.current||1,V=y.pageSize||10,L=(O-1)*V,Ee=L+V;U.value=f.slice(L,Ee),y.total=f.length}}catch(r){console.error("获取订单列表失败:",r),g.error("获取订单列表失败"),U.value=[],y.total=0}finally{R.value=!1}}),Ye=()=>{const n=["pending_payment","pending_delivery","delivered","completed","cancelled"],e=["unpaid","paid","refunded"],r=["normal","vip","wholesale"];return Array.from({length:25}).map((o,p)=>{const f=n[Math.floor(Math.random()*n.length)],O=f==="pending_payment"?"unpaid":f==="cancelled"?e[Math.floor(Math.random()*e.length)]:"paid",V={id:p+1,orderNo:`ORD${String(p+10001).padStart(5,"0")}`,userId:p+100,userName:`测试用户${p+1}`,totalAmount:Number(Math.floor(Math.random()*1e4)/100+100),orderType:r[Math.floor(Math.random()*r.length)],status:f,paymentStatus:O,paymentMethod:O==="unpaid"?void 0:"微信支付",paymentTime:O==="unpaid"?void 0:new Date(Date.now()-Math.random()*864e5*30).toISOString(),deliveryTime:["completed","delivered"].includes(f)?new Date(Date.now()-Math.random()*864e5*15).toISOString():void 0,completionTime:f==="completed"?new Date(Date.now()-Math.random()*864e5*5).toISOString():void 0,cancelTime:f==="cancelled"?new Date(Date.now()-Math.random()*864e5*10).toISOString():void 0,remark:Math.random()>.7?`订单备注${p+1}`:void 0,address:`测试地址${p+1}`,consignee:`收货人${p+1}`,phone:`1380000${String(p+1).padStart(4,"0")}`,createdAt:new Date(Date.now()-Math.random()*864e5*60).toISOString(),updatedAt:new Date(Date.now()-Math.random()*864e5*30).toISOString(),merchant:{id:Math.floor(p/5)+1,username:`merchant${Math.floor(p/5)+1}`,name:`商家${Math.floor(p/5)+1}`,phone:`1380000${String(Math.floor(p/5)+1).padStart(4,"0")}`,email:`merchant${Math.floor(p/5)+1}@example.com`,role:Math.random()>.8?"admin":"user"},items:[{id:p*2+1,productId:p*3+100,productName:`测试商品${p*2+1}`,price:Math.floor(Math.random()*1e3)/100+50,quantity:Math.floor(Math.random()*5)+1,totalAmount:0,productCover:`https://via.placeholder.com/100?text=商品${p*2+1}`},{id:p*2+2,productId:p*3+101,productName:`测试商品${p*2+2}`,price:Math.floor(Math.random()*1e3)/100+50,quantity:Math.floor(Math.random()*5)+1,totalAmount:0,productCover:`https://via.placeholder.com/100?text=商品${p*2+2}`}]};return V.items=V.items.map(L=>Ce(we({},L),{totalAmount:L.price*L.quantity})),V})},Pe=()=>{y.current=1,$()},fe=()=>{Object.assign(d,{orderNo:"",userName:"",status:"",paymentStatus:"",startDate:"",endDate:""}),x.value=void 0,y.current=1,$()},ye=n=>{y.current=n.current,y.pageSize=n.pageSize,$()},ce=n=>q(this,null,function*(){try{R.value=!0;try{const e=yield ut(n.id);if(e)i.value=e,K.value=!0;else throw new Error("订单详情获取失败: 空响应")}catch(e){console.error("获取订单详情API失败，使用模拟数据:",e),g.warning(`当前使用测试数据，接口异常：${e.message||e}`),i.value=n,K.value=!0}}catch(e){console.error("获取订单详情失败:",e),g.error("获取订单详情失败")}finally{R.value=!1}}),ke=n=>q(this,null,function*(){try{yield it(n.id,"管理员取消"),g.success("订单已取消"),$()}catch(e){console.error("取消订单失败:",e),g.error("取消订单失败")}}),ge=n=>{Y.orderId=n.id,Y.remark=n.remark||"",j.value=!0},qe=()=>{j.value=!1},ze=()=>q(this,null,function*(){if(te.value)try{yield te.value.validate(),A.value=!0,yield dt(Y.orderId,Y.remark),g.success("备注成功"),j.value=!1,$()}catch(n){console.error("备注失败:",n),g.error("备注失败")}finally{A.value=!1}}),be=n=>{S.orderId=n.id,S.trackingNumber="",S.trackingCompany="",S.deliveryImages=[],B.value=[],E.value=!0},Be=()=>{E.value=!1},Ve=()=>q(this,null,function*(){if(ae.value)try{yield ae.value.validate(),A.value=!0,yield pt(S.orderId,S.trackingNumber,S.trackingCompany,S.deliveryImages),g.success("发货成功"),E.value=!1,$()}catch(n){console.error("发货失败:",n),g.error("发货失败")}finally{A.value=!1}}),_e=n=>{N.orderId=n.id,N.status="",N.remark="",J.value=!0},Le=()=>{J.value=!1},je=()=>q(this,null,function*(){if(le.value)try{yield le.value.validate(),A.value=!0;const n=N.status,e=N.remark||void 0;yield mt(N.orderId,n,e),g.success(N.status==="approved"?"退款申请已通过":"退款申请已拒绝"),J.value=!1,$()}catch(n){console.error("处理退款失败:",n),g.error("处理退款失败")}finally{A.value=!1}}),F=n=>n?ot(n).format("YYYY-MM-DD HH:mm:ss"):"",re=n=>({pending_payment:"待支付",pending_delivery:"待发货",delivered:"已发货",completed:"已完成",cancelled:"已取消",refund_pending:"退款处理中",refund_approved:"退款已通过",refund_rejected:"退款已拒绝"})[n]||n,oe=n=>({pending_payment:"orange",pending_delivery:"blue",delivered:"cyan",completed:"green",cancelled:"red",refund_pending:"gold",refund_approved:"purple",refund_rejected:"volcano"})[n]||"default",ne=n=>({unpaid:"未支付",paid:"已支付",refunded:"已退款"})[n]||n,se=n=>({unpaid:"orange",paid:"green",refunded:"purple"})[n]||"default",ue=n=>n?{normal:"普通订单",vip:"VIP订单",wholesale:"批发订单"}[n]||n:"-";return rt(()=>{$()}),(n,e)=>(m(),_("div",null,[a(t(Ne),{bordered:!1,class:"mb-20"},{default:l(()=>[a(t(X),{model:d,layout:"inline",class:"search-form",onSubmit:Ze(Pe,["prevent"])},{default:l(()=>[a(t(D),{label:"订单号"},{default:l(()=>[a(t(Z),{value:d.orderNo,"onUpdate:value":e[0]||(e[0]=r=>d.orderNo=r),placeholder:"请输入订单号","allow-clear":""},null,8,["value"])]),_:1}),a(t(D),{label:"用户名"},{default:l(()=>[a(t(Z),{value:d.userName,"onUpdate:value":e[1]||(e[1]=r=>d.userName=r),placeholder:"请输入用户名","allow-clear":""},null,8,["value"])]),_:1}),a(t(D),{label:"订单状态"},{default:l(()=>[a(t(ie),{value:d.status,"onUpdate:value":e[2]||(e[2]=r=>d.status=r),placeholder:"请选择订单状态",style:{width:"160px"},"allow-clear":""},{default:l(()=>[a(t(I),{value:""},{default:l(()=>e[16]||(e[16]=[s("全部")])),_:1}),a(t(I),{value:"pending_payment"},{default:l(()=>e[17]||(e[17]=[s("待支付")])),_:1}),a(t(I),{value:"pending_delivery"},{default:l(()=>e[18]||(e[18]=[s("待发货")])),_:1}),a(t(I),{value:"delivered"},{default:l(()=>e[19]||(e[19]=[s("已发货")])),_:1}),a(t(I),{value:"completed"},{default:l(()=>e[20]||(e[20]=[s("已完成")])),_:1}),a(t(I),{value:"cancelled"},{default:l(()=>e[21]||(e[21]=[s("已取消")])),_:1})]),_:1},8,["value"])]),_:1}),a(t(D),{label:"支付状态"},{default:l(()=>[a(t(ie),{value:d.paymentStatus,"onUpdate:value":e[3]||(e[3]=r=>d.paymentStatus=r),placeholder:"请选择支付状态",style:{width:"140px"},"allow-clear":""},{default:l(()=>[a(t(I),{value:""},{default:l(()=>e[22]||(e[22]=[s("全部")])),_:1}),a(t(I),{value:"unpaid"},{default:l(()=>e[23]||(e[23]=[s("未支付")])),_:1}),a(t(I),{value:"paid"},{default:l(()=>e[24]||(e[24]=[s("已支付")])),_:1}),a(t(I),{value:"refunded"},{default:l(()=>e[25]||(e[25]=[s("已退款")])),_:1})]),_:1},8,["value"])]),_:1}),a(t(D),{label:"下单时间"},{default:l(()=>[a(t(b),{value:x.value,"onUpdate:value":e[4]||(e[4]=r=>x.value=r),format:"YYYY-MM-DD",placeholder:["开始日期","结束日期"],style:{width:"240px"}},null,8,["value"])]),_:1}),a(t(D),null,{default:l(()=>[a(t(de),null,{default:l(()=>[a(t(C),{type:"primary","html-type":"submit"},{default:l(()=>e[26]||(e[26]=[s("查询")])),_:1}),a(t(C),{onClick:fe},{default:l(()=>e[27]||(e[27]=[s("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(t(Ne),{bordered:!1},{default:l(()=>[h("div",ct,[e[28]||(e[28]=h("div",{class:"table-title"},"订单列表",-1)),h("div",kt,[a(t(et),{title:"刷新"},{default:l(()=>[a(t(C),{onClick:$},{icon:l(()=>[a(t(yt))]),_:1})]),_:1})])]),a(t(vt),{"active-key":W.value,"onUpdate:activeKey":e[5]||(e[5]=r=>W.value=r),onChange:xe},{default:l(()=>[a(t(De),{tab:"所有订单",key:"all"},{default:l(()=>[a(t(ve),{columns:G,"data-source":U.value,loading:R.value,pagination:y,onChange:ye,"row-key":"id"},{bodyCell:l(({column:r,record:o})=>[r.key==="orderInfo"?(m(),_("div",gt,[h("div",null,"订单号: "+u(o.orderNo),1),h("div",null,"用户: "+u(o.userName),1),h("div",null,"类型: "+u(ue(o.orderType)),1)])):v("",!0),r.key==="amount"?(m(),_("div",bt," ¥"+u(Number(o.totalAmount).toFixed(2)),1)):v("",!0),r.key==="status"?(m(),T(t(z),{key:2,color:oe(o.status)},{default:l(()=>[s(u(re(o.status)),1)]),_:2},1032,["color"])):v("",!0),r.key==="paymentStatus"?(m(),T(t(z),{key:3,color:se(o.paymentStatus)},{default:l(()=>[s(u(ne(o.paymentStatus)),1)]),_:2},1032,["color"])):v("",!0),r.key==="time"?(m(),_("div",_t,[h("div",null,"下单: "+u(F(o.createdAt)),1),o.paymentTime?(m(),_("div",ht," 支付: "+u(F(o.paymentTime)),1)):v("",!0)])):v("",!0),r.key==="action"?(m(),T(t(de),{key:5},{default:l(()=>[a(t(C),{type:"link",onClick:()=>ce(o)},{default:l(()=>e[29]||(e[29]=[s(" 详情 ")])),_:2},1032,["onClick"]),o.status==="pending_payment"?(m(),T(t(Ie),{key:0,title:"确定取消该订单吗？",onConfirm:()=>ke(o),"ok-text":"确定","cancel-text":"取消"},{default:l(()=>[a(t(C),{type:"link",danger:""},{default:l(()=>e[30]||(e[30]=[s("取消订单")])),_:1})]),_:2},1032,["onConfirm"])):v("",!0),o.status==="pending_delivery"?(m(),T(t(C),{key:1,type:"link",onClick:()=>be(o)},{default:l(()=>e[31]||(e[31]=[s(" 发货 ")])),_:2},1032,["onClick"])):v("",!0),o.status==="refund_pending"?(m(),T(t(C),{key:2,type:"link",onClick:()=>_e(o)},{default:l(()=>e[32]||(e[32]=[s(" 处理退款 ")])),_:2},1032,["onClick"])):v("",!0),a(t(C),{type:"link",onClick:()=>ge(o)},{default:l(()=>e[33]||(e[33]=[s(" 备注 ")])),_:2},1032,["onClick"])]),_:2},1024)):v("",!0)]),_:1},8,["data-source","loading","pagination"])]),_:1}),a(t(De),{tab:"退款订单",key:"refund"},{default:l(()=>[a(t(ve),{columns:G,"data-source":U.value,loading:R.value,pagination:y,onChange:ye,"row-key":"id"},{bodyCell:l(({column:r,record:o})=>[r.key==="orderInfo"?(m(),_("div",St,[h("div",null,"订单号: "+u(o.orderNo),1),h("div",null,"用户: "+u(o.userName),1),h("div",null,"类型: "+u(ue(o.orderType)),1)])):v("",!0),r.key==="amount"?(m(),_("div",wt," ¥"+u(Number(o.totalAmount).toFixed(2)),1)):v("",!0),r.key==="status"?(m(),T(t(z),{key:2,color:oe(o.status)},{default:l(()=>[s(u(re(o.status)),1)]),_:2},1032,["color"])):v("",!0),r.key==="paymentStatus"?(m(),T(t(z),{key:3,color:se(o.paymentStatus)},{default:l(()=>[s(u(ne(o.paymentStatus)),1)]),_:2},1032,["color"])):v("",!0),r.key==="time"?(m(),_("div",Ct,[h("div",null,"下单: "+u(F(o.createdAt)),1),o.paymentTime?(m(),_("div",Mt," 支付: "+u(F(o.paymentTime)),1)):v("",!0)])):v("",!0),r.key==="action"?(m(),T(t(de),{key:5},{default:l(()=>[a(t(C),{type:"link",onClick:()=>ce(o)},{default:l(()=>e[34]||(e[34]=[s(" 详情 ")])),_:2},1032,["onClick"]),o.status==="pending_payment"?(m(),T(t(Ie),{key:0,title:"确定取消该订单吗？",onConfirm:()=>ke(o),"ok-text":"确定","cancel-text":"取消"},{default:l(()=>[a(t(C),{type:"link",danger:""},{default:l(()=>e[35]||(e[35]=[s("取消订单")])),_:1})]),_:2},1032,["onConfirm"])):v("",!0),o.status==="pending_delivery"?(m(),T(t(C),{key:1,type:"link",onClick:()=>be(o)},{default:l(()=>e[36]||(e[36]=[s(" 发货 ")])),_:2},1032,["onClick"])):v("",!0),o.status==="refund_pending"?(m(),T(t(C),{key:2,type:"link",onClick:()=>_e(o)},{default:l(()=>e[37]||(e[37]=[s(" 处理退款 ")])),_:2},1032,["onClick"])):v("",!0),a(t(C),{type:"link",onClick:()=>ge(o)},{default:l(()=>e[38]||(e[38]=[s(" 备注 ")])),_:2},1032,["onClick"])]),_:2},1024)):v("",!0)]),_:1},8,["data-source","loading","pagination"])]),_:1})]),_:1},8,["active-key"])]),_:1}),a(t(ee),{visible:K.value,"onUpdate:visible":e[6]||(e[6]=r=>K.value=r),title:"订单详情",width:"800px",footer:null,"mask-closable":!0},{default:l(()=>[i.value?(m(),_("div",Nt,[a(t(me),{title:"基本信息",bordered:"",column:2},{default:l(()=>[a(t(c),{label:"订单号"},{default:l(()=>[s(u(i.value.orderNo),1)]),_:1}),a(t(c),{label:"下单时间"},{default:l(()=>[s(u(F(i.value.createdAt)),1)]),_:1}),a(t(c),{label:"用户"},{default:l(()=>[s(u(i.value.userName),1)]),_:1}),a(t(c),{label:"总金额"},{default:l(()=>[s(" ¥"+u(Number(i.value.totalAmount).toFixed(2)),1)]),_:1}),a(t(c),{label:"订单类型"},{default:l(()=>[s(u(ue(i.value.orderType)),1)]),_:1}),a(t(c),{label:"订单状态"},{default:l(()=>[a(t(z),{color:oe(i.value.status)},{default:l(()=>[s(u(re(i.value.status)),1)]),_:1},8,["color"])]),_:1}),a(t(c),{label:"支付状态"},{default:l(()=>[a(t(z),{color:se(i.value.paymentStatus)},{default:l(()=>[s(u(ne(i.value.paymentStatus)),1)]),_:1},8,["color"])]),_:1}),a(t(c),{label:"支付方式",span:2},{default:l(()=>[s(u(i.value.paymentMethod||"-"),1)]),_:1}),a(t(c),{label:"支付时间",span:2},{default:l(()=>[s(u(i.value.paymentTime?F(i.value.paymentTime):"-"),1)]),_:1}),a(t(c),{label:"发货时间",span:2},{default:l(()=>[s(u(i.value.deliveryTime?F(i.value.deliveryTime):"-"),1)]),_:1}),a(t(c),{label:"完成时间",span:2},{default:l(()=>[s(u(i.value.completionTime?F(i.value.completionTime):"-"),1)]),_:1}),a(t(c),{label:"备注",span:2},{default:l(()=>[s(u(i.value.remark||"-"),1)]),_:1})]),_:1}),a(t(pe)),a(t(me),{title:"商家信息",bordered:"",column:2},{default:l(()=>[a(t(c),{label:"商家名称"},{default:l(()=>{var r;return[s(u(((r=i.value.merchant)==null?void 0:r.name)||"-"),1)]}),_:1}),a(t(c),{label:"商家用户名"},{default:l(()=>{var r;return[s(u(((r=i.value.merchant)==null?void 0:r.username)||"-"),1)]}),_:1}),a(t(c),{label:"联系电话"},{default:l(()=>{var r;return[s(u(((r=i.value.merchant)==null?void 0:r.phone)||"-"),1)]}),_:1}),a(t(c),{label:"邮箱地址"},{default:l(()=>{var r;return[s(u(((r=i.value.merchant)==null?void 0:r.email)||"-"),1)]}),_:1}),a(t(c),{label:"角色类型",span:2},{default:l(()=>{var r;return[a(t(z),{color:((r=i.value.merchant)==null?void 0:r.role)==="admin"?"red":"blue"},{default:l(()=>{var o;return[s(u(((o=i.value.merchant)==null?void 0:o.role)==="admin"?"超级管理员":"商家用户"),1)]}),_:1},8,["color"])]}),_:1})]),_:1}),a(t(pe)),a(t(me),{title:"收货信息",bordered:"",column:1},{default:l(()=>[a(t(c),{label:"收货人"},{default:l(()=>[s(u(i.value.consignee||"-"),1)]),_:1}),a(t(c),{label:"联系电话"},{default:l(()=>[s(u(i.value.phone||"-"),1)]),_:1}),a(t(c),{label:"收货地址"},{default:l(()=>[s(u(i.value.address||"-"),1)]),_:1})]),_:1}),a(t(pe)),e[39]||(e[39]=h("h3",null,"商品信息",-1)),a(t(ve),{columns:Q,"data-source":i.value.items,pagination:!1,"row-key":"id"},{bodyCell:l(({column:r,record:o})=>[r.key==="product"?(m(),_("div",Dt,[o.productCover?(m(),_("img",{key:0,src:o.productCover,alt:"商品图片",class:"product-img"},null,8,It)):v("",!0),h("div",null,u(o.productName),1)])):v("",!0),r.key==="price"?(m(),_("div",Tt,"¥"+u(Number(o.price).toFixed(2)),1)):v("",!0),r.key==="total"?(m(),_("div",Ot," ¥"+u(Number(o.totalAmount).toFixed(2)),1)):v("",!0)]),_:1},8,["data-source"])])):v("",!0)]),_:1},8,["visible"]),a(t(ee),{visible:j.value,"onUpdate:visible":e[8]||(e[8]=r=>j.value=r),title:"订单备注",onOk:ze,"confirm-loading":A.value,onCancel:qe,"ok-text":"确定","cancel-text":"取消"},{default:l(()=>[a(t(X),{ref_key:"remarkFormRef",ref:te,model:Y,rules:Te,"label-col":{span:4},"wrapper-col":{span:18}},{default:l(()=>[a(t(D),{label:"备注",name:"remark"},{default:l(()=>[a(t(Me),{value:Y.remark,"onUpdate:value":e[7]||(e[7]=r=>Y.remark=r),placeholder:"请输入订单备注",rows:4},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","confirm-loading"]),a(t(ee),{visible:E.value,"onUpdate:visible":e[12]||(e[12]=r=>E.value=r),title:"订单发货",onOk:Ve,"confirm-loading":A.value,onCancel:Be,"ok-text":"确定","cancel-text":"取消"},{default:l(()=>[a(t(X),{ref_key:"shipFormRef",ref:ae,model:S,rules:Oe,"label-col":{span:4},"wrapper-col":{span:18}},{default:l(()=>[a(t(D),{label:"快递公司",name:"trackingCompany"},{default:l(()=>[a(t(Z),{value:S.trackingCompany,"onUpdate:value":e[9]||(e[9]=r=>S.trackingCompany=r),placeholder:"请输入快递公司名称"},null,8,["value"])]),_:1}),a(t(D),{label:"快递单号",name:"trackingNumber"},{default:l(()=>[a(t(Z),{value:S.trackingNumber,"onUpdate:value":e[10]||(e[10]=r=>S.trackingNumber=r),placeholder:"请输入快递单号"},null,8,["value"])]),_:1}),a(t(D),{label:"发货图片"},{default:l(()=>[a(t(tt),{"file-list":B.value,"onUpdate:fileList":e[11]||(e[11]=r=>B.value=r),"list-type":"picture-card",action:$e,headers:Ae,name:"image","before-upload":Re,onChange:Fe},{default:l(()=>[B.value.length>=5?(m(),_("div",At,e[40]||(e[40]=[h("div",null,"最多上传5张",-1)]))):(m(),_("div",$t,[a(t(ft)),e[41]||(e[41]=h("div",{style:{"margin-top":"8px"}},"上传",-1))]))]),_:1},8,["file-list"]),e[42]||(e[42]=h("div",{class:"upload-hint"}," 请上传发货图片，最多5张，支持jpg、png格式 ",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","confirm-loading"]),a(t(ee),{visible:J.value,"onUpdate:visible":e[15]||(e[15]=r=>J.value=r),title:"处理退款申请",onOk:je,"confirm-loading":A.value,onCancel:Le,"ok-text":"确定","cancel-text":"取消"},{default:l(()=>[a(t(X),{ref_key:"statusFormRef",ref:le,model:N,rules:Ue,"label-col":{span:4},"wrapper-col":{span:18}},{default:l(()=>[a(t(D),{label:"操作结果",name:"status"},{default:l(()=>[a(t(ie),{value:N.status,"onUpdate:value":e[13]||(e[13]=r=>N.status=r),placeholder:"请选择操作结果"},{default:l(()=>[a(t(I),{value:"approved"},{default:l(()=>e[43]||(e[43]=[s("通过")])),_:1}),a(t(I),{value:"rejected"},{default:l(()=>e[44]||(e[44]=[s("拒绝")])),_:1})]),_:1},8,["value"])]),_:1}),a(t(D),{label:"备注",name:"remark"},{default:l(()=>[a(t(Me),{value:N.remark,"onUpdate:value":e[14]||(e[14]=r=>N.remark=r),placeholder:"请输入备注",rows:4},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","confirm-loading"])]))}}),Lt=at(Rt,[["__scopeId","data-v-cb522885"]]);export{Lt as default};
