var te=(e,t,a)=>new Promise((r,o)=>{var v=y=>{try{n(a.next(y))}catch(g){o(g)}},f=y=>{try{n(a.throw(y))}catch(g){o(g)}},n=y=>y.done?r(y.value):Promise.resolve(y.value).then(v,f);n((a=a.apply(e,t)).next())});import{g as Ve,af as He,q as L,ag as je,ai as J,j as ie,aM as Ge,aN as Ne,aO as tt,n as V,ak as $e,al as be,am as Re,m as We,aE as at,aP as nt,aQ as it,i as lt,aJ as rt,aR as ot,v as ke,aG as re,aF as Pe,aH as st,aI as ge,aS as dt,P as ct,Q as ut,R as ve,U as pt,W as gt,X as oe,S as Te,B as Me,Z as me,a0 as Ae,a1 as fe,b as Y,_ as vt}from"./bootstrap-CBNqZsYX.js";import{N as Fe,Q as Ue,d as Q,a8 as ae,c as G,T as he,o as Xe,k as ye,A as i,$ as mt,r as U,C as Ee,I as Le,a as R,b as D,z as p,g as c,B as E,f as z,l as ne,e as W,t as C,G as De,n as Oe,J as ft}from"../jse/index-index-Cfj6TwKU.js";import{I as yt,J as $t,K as ht,L as St}from"./operation-C8U6V3qw.js";import{C as Be}from"./index-oBtY6qbd.js";import{u as Ke,P as xt,a as bt,T as Ct}from"./index-BwHvTSl1.js";import{D as It,a as B}from"./index-CEIfxdgB.js";const zt=e=>{const{antCls:t,componentCls:a,iconCls:r,avatarBg:o,avatarColor:v,containerSize:f,containerSizeLG:n,containerSizeSM:y,textFontSize:g,textFontSizeLG:$,textFontSizeSM:b,borderRadius:S,borderRadiusLG:h,borderRadiusSM:_,lineWidth:w,lineType:I}=e,k=(M,m,P)=>({width:M,height:M,lineHeight:`${M-w*2}px`,borderRadius:"50%",[`&${a}-square`]:{borderRadius:P},[`${a}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${a}-icon`]:{fontSize:m,[`> ${r}`]:{margin:0}}});return{[a]:L(L(L(L({},je(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:v,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:o,border:`${w}px ${I} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),k(f,g,S)),{"&-lg":L({},k(n,$,h)),"&-sm":L({},k(y,b,_)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},_t=e=>{const{componentCls:t,groupBorderColor:a,groupOverlapping:r,groupSpace:o}=e;return{[`${t}-group`]:{display:"inline-flex",[`${t}`]:{borderColor:a},"> *:not(:first-child)":{marginInlineStart:r}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:o}}}},Ye=Ve("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:a}=e,r=He(e,{avatarBg:a,avatarColor:t});return[zt(r),_t(r)]},e=>{const{controlHeight:t,controlHeightLG:a,controlHeightSM:r,fontSize:o,fontSizeLG:v,fontSizeXL:f,fontSizeHeading3:n,marginXS:y,marginXXS:g,colorBorderBg:$}=e;return{containerSize:t,containerSizeLG:a,containerSizeSM:r,textFontSize:Math.round((v+f)/2),textFontSizeLG:n,textFontSizeSM:o,groupSpace:g,groupOverlapping:-y,groupBorderColor:$}}),Je=Symbol("AvatarContextKey"),wt=()=>Fe(Je,{}),kt=e=>Ue(Je,e),Pt=()=>({prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:()=>"default"},src:String,srcset:String,icon:J.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}),K=Q({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:Pt(),slots:Object,setup(e,t){let{slots:a,attrs:r}=t;const o=ae(!0),v=ae(!1),f=ae(1),n=ae(null),y=ae(null),{prefixCls:g}=ie("avatar",e),[$,b]=Ye(g),S=wt(),h=G(()=>e.size==="default"?S.size:e.size),_=Ke(),w=Ge(()=>{if(typeof e.size!="object")return;const m=$e.find(s=>_.value[s]);return e.size[m]}),I=m=>w.value?{width:`${w.value}px`,height:`${w.value}px`,lineHeight:`${w.value}px`,fontSize:`${m?w.value/2:18}px`}:{},k=()=>{if(!n.value||!y.value)return;const m=n.value.offsetWidth,P=y.value.offsetWidth;if(m!==0&&P!==0){const{gap:s=4}=e;s*2<P&&(f.value=P-s*2<m?(P-s*2)/m:1)}},M=()=>{const{loadError:m}=e;(m==null?void 0:m())!==!1&&(o.value=!1)};return he(()=>e.src,()=>{ye(()=>{o.value=!0,f.value=1})}),he(()=>e.gap,()=>{ye(()=>{k()})}),Xe(()=>{ye(()=>{k(),v.value=!0})}),()=>{var m,P;const{shape:s,src:l,alt:d,srcset:x,draggable:j,crossOrigin:q}=e,se=(m=S.shape)!==null&&m!==void 0?m:s,X=Ne(a,e,"icon"),u=g.value,T={[`${r.class}`]:!!r.class,[u]:!0,[`${u}-lg`]:h.value==="large",[`${u}-sm`]:h.value==="small",[`${u}-${se}`]:!0,[`${u}-image`]:l&&o.value,[`${u}-icon`]:X,[b.value]:!0},O=typeof h.value=="number"?{width:`${h.value}px`,height:`${h.value}px`,lineHeight:`${h.value}px`,fontSize:X?`${h.value/2}px`:"18px"}:{},N=(P=a.default)===null||P===void 0?void 0:P.call(a);let A;if(l&&o.value)A=i("img",{draggable:j,src:l,srcset:x,onError:M,alt:d,crossorigin:q},null);else if(X)A=X;else if(v.value||f.value!==1){const H=`scale(${f.value}) translateX(-50%)`,Z={msTransform:H,WebkitTransform:H,transform:H},ee=typeof h.value=="number"?{lineHeight:`${h.value}px`}:{};A=i(tt,{onResize:k},{default:()=>[i("span",{class:`${u}-string`,ref:n,style:L(L({},ee),Z)},[N])]})}else A=i("span",{class:`${u}-string`,ref:n,style:{opacity:0}},[N]);return $(i("span",V(V({},r),{},{ref:y,class:T,style:[O,I(!!X),r.style]}),[A]))}}}),Tt=()=>({prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"},shape:{type:String,default:"circle"}}),Se=Q({compatConfig:{MODE:3},name:"AAvatarGroup",inheritAttrs:!1,props:Tt(),setup(e,t){let{slots:a,attrs:r}=t;const{prefixCls:o,direction:v}=ie("avatar",e),f=G(()=>`${o.value}-group`),[n,y]=Ye(o);return mt(()=>{const g={size:e.size,shape:e.shape};kt(g)}),()=>{const{maxPopoverPlacement:g="top",maxCount:$,maxStyle:b,maxPopoverTrigger:S="hover",shape:h}=e,_={[f.value]:!0,[`${f.value}-rtl`]:v.value==="rtl",[`${r.class}`]:!!r.class,[y.value]:!0},w=Ne(a,e),I=be(w).map((M,m)=>Re(M,{key:`avatar-key-${m}`})),k=I.length;if($&&$<k){const M=I.slice(0,$),m=I.slice($,k);return M.push(i(xt,{key:"avatar-popover-key",content:m,trigger:S,placement:g,overlayClassName:`${f.value}-popover`},{default:()=>[i(K,{style:b,shape:h},{default:()=>[`+${k-$}`]})]})),n(i("div",V(V({},r),{},{class:_,style:r.style}),[M]))}return n(i("div",V(V({},r),{},{class:_,style:r.style}),[I]))}}});K.Group=Se;K.install=function(e){return e.component(K.name,K),e.component(Se.name,Se),e};const Mt=()=>({avatar:J.any,description:J.any,prefixCls:String,title:J.any}),At=Q({compatConfig:{MODE:3},name:"AListItemMeta",props:Mt(),displayName:"AListItemMeta",__ANT_LIST_ITEM_META:!0,slots:Object,setup(e,t){let{slots:a}=t;const{prefixCls:r}=ie("list",e);return()=>{var o,v,f,n,y,g;const $=`${r.value}-item-meta`,b=(o=e.title)!==null&&o!==void 0?o:(v=a.title)===null||v===void 0?void 0:v.call(a),S=(f=e.description)!==null&&f!==void 0?f:(n=a.description)===null||n===void 0?void 0:n.call(a),h=(y=e.avatar)!==null&&y!==void 0?y:(g=a.avatar)===null||g===void 0?void 0:g.call(a),_=i("div",{class:`${r.value}-item-meta-content`},[b&&i("h4",{class:`${r.value}-item-meta-title`},[b]),S&&i("div",{class:`${r.value}-item-meta-description`},[S])]);return i("div",{class:$},[h&&i("div",{class:`${r.value}-item-meta-avatar`},[h]),(b||S)&&_])}}}),Qe=Symbol("ListContextKey");var Et=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(a[r[o]]=e[r[o]]);return a};const Lt=()=>({prefixCls:String,extra:J.any,actions:J.array,grid:Object,colStyle:{type:Object,default:void 0}}),xe=Q({compatConfig:{MODE:3},name:"AListItem",inheritAttrs:!1,Meta:At,props:Lt(),slots:Object,setup(e,t){let{slots:a,attrs:r}=t;const{itemLayout:o,grid:v}=Fe(Qe,{grid:U(),itemLayout:U()}),{prefixCls:f}=ie("list",e),n=()=>{var g;const $=((g=a.default)===null||g===void 0?void 0:g.call(a))||[];let b;return $.forEach(S=>{nt(S)&&!it(S)&&(b=!0)}),b&&$.length>1},y=()=>{var g,$;const b=(g=e.extra)!==null&&g!==void 0?g:($=a.extra)===null||$===void 0?void 0:$.call(a);return o.value==="vertical"?!!b:!n()};return()=>{var g,$,b,S,h;const{class:_}=r,w=Et(r,["class"]),I=f.value,k=(g=e.extra)!==null&&g!==void 0?g:($=a.extra)===null||$===void 0?void 0:$.call(a),M=(b=a.default)===null||b===void 0?void 0:b.call(a);let m=(S=e.actions)!==null&&S!==void 0?S:be((h=a.actions)===null||h===void 0?void 0:h.call(a));m=m&&!Array.isArray(m)?[m]:m;const P=m&&m.length>0&&i("ul",{class:`${I}-item-action`,key:"actions"},[m.map((d,x)=>i("li",{key:`${I}-item-action-${x}`},[d,x!==m.length-1&&i("em",{class:`${I}-item-action-split`},null)]))]),s=v.value?"div":"li",l=i(s,V(V({},w),{},{class:We(`${I}-item`,{[`${I}-item-no-flex`]:!y()},_)}),{default:()=>[o.value==="vertical"&&k?[i("div",{class:`${I}-item-main`,key:"content"},[M,P]),i("div",{class:`${I}-item-extra`,key:"extra"},[k])]:[M,P,Re(k,{key:"extra"})]]});return v.value?i(at,{flex:1,style:e.colStyle},{default:()=>[l]}):l}}}),Dt=e=>{const{listBorderedCls:t,componentCls:a,paddingLG:r,margin:o,padding:v,listItemPaddingSM:f,marginLG:n,borderRadiusLG:y}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:y,[`${a}-header,${a}-footer,${a}-item`]:{paddingInline:r},[`${a}-pagination`]:{margin:`${o}px ${n}px`}},[`${t}${a}-sm`]:{[`${a}-item,${a}-header,${a}-footer`]:{padding:f}},[`${t}${a}-lg`]:{[`${a}-item,${a}-header,${a}-footer`]:{padding:`${v}px ${r}px`}}}},Ot=e=>{const{componentCls:t,screenSM:a,screenMD:r,marginLG:o,marginSM:v,margin:f}=e;return{[`@media screen and (max-width:${r})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:o}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${a})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:v}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${f}px`}}}}}},Bt=e=>{const{componentCls:t,antCls:a,controlHeight:r,minHeight:o,paddingSM:v,marginLG:f,padding:n,listItemPadding:y,colorPrimary:g,listItemPaddingSM:$,listItemPaddingLG:b,paddingXS:S,margin:h,colorText:_,colorTextDescription:w,motionDurationSlow:I,lineWidth:k}=e;return{[`${t}`]:L(L({},je(e)),{position:"relative","*":{outline:"none"},[`${t}-header, ${t}-footer`]:{background:"transparent",paddingBlock:v},[`${t}-pagination`]:{marginBlockStart:f,textAlign:"end",[`${a}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:o,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:y,color:_,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:n},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:_},[`${t}-item-meta-title`]:{marginBottom:e.marginXXS,color:_,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:_,transition:`all ${I}`,"&:hover":{color:g}}},[`${t}-item-meta-description`]:{color:w,fontSize:e.fontSize,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${S}px`,color:w,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:k,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${n}px 0`,color:w,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:n,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${a}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:h,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:f},[`${t}-item-meta`]:{marginBlockEnd:n,[`${t}-item-meta-title`]:{marginBlockEnd:v,color:_,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:n,marginInlineStart:"auto","> li":{padding:`0 ${n}px`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${a}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:b},[`${t}-sm ${t}-item`]:{padding:$},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Vt=Ve("List",e=>{const t=He(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG,listItemPadding:`${e.paddingContentVertical}px ${e.paddingContentHorizontalLG}px`,listItemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,listItemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`});return[Bt(t),Dt(t),Ot(t)]},{contentWidth:220}),Ht=()=>({bordered:Pe(),dataSource:dt(),extra:re(),grid:ke(),itemLayout:String,loading:ge([Boolean,Object]),loadMore:re(),pagination:ge([Boolean,Object]),prefixCls:String,rowKey:ge([String,Number,Function]),renderItem:st(),size:String,split:Pe(),header:re(),footer:re(),locale:ke()}),F=Q({compatConfig:{MODE:3},name:"AList",inheritAttrs:!1,Item:xe,props:lt(Ht(),{dataSource:[],bordered:!1,split:!0,loading:!1,pagination:!1}),slots:Object,setup(e,t){let{slots:a,attrs:r}=t;var o,v;Ue(Qe,{grid:Ee(e,"grid"),itemLayout:Ee(e,"itemLayout")});const f={current:1,total:0},{prefixCls:n,direction:y,renderEmpty:g}=ie("list",e),[$,b]=Vt(n),S=G(()=>e.pagination&&typeof e.pagination=="object"?e.pagination:{}),h=U((o=S.value.defaultCurrent)!==null&&o!==void 0?o:1),_=U((v=S.value.defaultPageSize)!==null&&v!==void 0?v:10);he(S,()=>{"current"in S.value&&(h.value=S.value.current),"pageSize"in S.value&&(_.value=S.value.pageSize)});const w=[],I=u=>(T,O)=>{h.value=T,_.value=O,S.value[u]&&S.value[u](T,O)},k=I("onChange"),M=I("onShowSizeChange"),m=G(()=>typeof e.loading=="boolean"?{spinning:e.loading}:e.loading),P=G(()=>m.value&&m.value.spinning),s=G(()=>{let u="";switch(e.size){case"large":u="lg";break;case"small":u="sm";break}return u}),l=G(()=>({[`${n.value}`]:!0,[`${n.value}-vertical`]:e.itemLayout==="vertical",[`${n.value}-${s.value}`]:s.value,[`${n.value}-split`]:e.split,[`${n.value}-bordered`]:e.bordered,[`${n.value}-loading`]:P.value,[`${n.value}-grid`]:!!e.grid,[`${n.value}-rtl`]:y.value==="rtl"})),d=G(()=>{const u=L(L(L({},f),{total:e.dataSource.length,current:h.value,pageSize:_.value}),e.pagination||{}),T=Math.ceil(u.total/u.pageSize);return u.current>T&&(u.current=T),u}),x=G(()=>{let u=[...e.dataSource];return e.pagination&&e.dataSource.length>(d.value.current-1)*d.value.pageSize&&(u=[...e.dataSource].splice((d.value.current-1)*d.value.pageSize,d.value.pageSize)),u}),j=Ke(),q=Ge(()=>{for(let u=0;u<$e.length;u+=1){const T=$e[u];if(j.value[T])return T}}),se=G(()=>{if(!e.grid)return;const u=q.value&&e.grid[q.value]?e.grid[q.value]:e.grid.column;if(u)return{width:`${100/u}%`,maxWidth:`${100/u}%`}}),X=(u,T)=>{var O;const N=(O=e.renderItem)!==null&&O!==void 0?O:a.renderItem;if(!N)return null;let A;const H=typeof e.rowKey;return H==="function"?A=e.rowKey(u):H==="string"||H==="number"?A=u[e.rowKey]:A=u.key,A||(A=`list-item-${T}`),w[T]=A,N({item:u,index:T})};return()=>{var u,T,O,N,A,H,Z,ee;const Ce=(u=e.loadMore)!==null&&u!==void 0?u:(T=a.loadMore)===null||T===void 0?void 0:T.call(a),de=(O=e.footer)!==null&&O!==void 0?O:(N=a.footer)===null||N===void 0?void 0:N.call(a),Ie=(A=e.header)!==null&&A!==void 0?A:(H=a.header)===null||H===void 0?void 0:H.call(a),ze=be((Z=a.default)===null||Z===void 0?void 0:Z.call(a)),qe=!!(Ce||e.pagination||de),Ze=We(L(L({},l.value),{[`${n.value}-something-after-last-item`]:qe}),r.class,b.value),_e=e.pagination?i("div",{class:`${n.value}-pagination`},[i(bt,V(V({},d.value),{},{onChange:k,onShowSizeChange:M}),null)]):null;let ce=P.value&&i("div",{style:{minHeight:"53px"}},null);if(x.value.length>0){w.length=0;const we=x.value.map((ue,pe)=>X(ue,pe)),et=we.map((ue,pe)=>i("div",{key:w[pe],style:se.value},[ue]));ce=e.grid?i(rt,{gutter:e.grid.gutter},{default:()=>[et]}):i("ul",{class:`${n.value}-items`},[we])}else!ze.length&&!P.value&&(ce=i("div",{class:`${n.value}-empty-text`},[((ee=e.locale)===null||ee===void 0?void 0:ee.emptyText)||g("List")]));const le=d.value.position||"bottom";return $(i("div",V(V({},r),{},{class:Ze}),[(le==="top"||le==="both")&&_e,Ie&&i("div",{class:`${n.value}-header`},[Ie]),i(ot,m.value,{default:()=>[ce,ze]}),de&&i("div",{class:`${n.value}-footer`},[de]),Ce||(le==="bottom"||le==="both")&&_e]))}}});F.install=function(e){return e.component(F.name,F),e.component(F.Item.name,F.Item),e.component(F.Item.Meta.name,F.Item.Meta),e};const jt={key:1},Gt={key:1,class:"text-gray-400"},Nt=["onClick"],Rt=["onClick"],Wt=["onClick"],Ft={key:0},Ut={key:1,class:"text-gray-400"},Xt=Q({__name:"mini-users",setup(e){const t=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"头像",dataIndex:"avatar",key:"avatar",width:80},{title:"昵称",dataIndex:"nickname",key:"nickname",width:150},{title:"手机号",dataIndex:"phone",key:"phone",width:120},{title:"性别",dataIndex:"gender",key:"gender",width:80},{title:"年龄",dataIndex:"age",key:"age",width:80},{title:"用户类型",dataIndex:"userType",key:"userType",width:100,customRender:({text:s})=>s==="supplier"?"供应商":"消费者"},{title:"VIP状态",dataIndex:"isVip",key:"vipStatus",width:100},{title:"VIP到期时间",dataIndex:"vipExpireDate",key:"vipExpireDate",width:150},{title:"注册时间",dataIndex:"createdAt",key:"createdAt",width:150},{title:"操作",key:"action",width:250}],a=U(!1),r=U([]),o=Le({keyword:"",gender:null}),v=Le({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0}),f=U(!1),n=U(null),y=U(!1),g=s=>s?ft(s).format("YYYY-MM-DD HH:mm:ss"):"-",$=s=>{if(!s.isVip||!s.vipExpireDate)return{status:"none",text:"普通用户",color:"default"};const l=new Date,d=new Date(s.vipExpireDate),x=d<=l,j=Math.ceil((d.getTime()-l.getTime())/(1e3*60*60*24));return x?{status:"expired",text:"VIP已过期",color:"red"}:j<=7?{status:"expiring",text:"VIP即将过期",color:"orange"}:{status:"active",text:"VIP会员",color:"gold"}},b=s=>{if(!s.isVip||!s.vipExpireDate)return{class:"text-gray-400"};const l=new Date,d=new Date(s.vipExpireDate),x=d<=l,j=Math.ceil((d.getTime()-l.getTime())/(1e3*60*60*24));return x?{class:"text-red-500"}:j<=7?{class:"text-orange-500"}:{class:"text-green-600"}},S=s=>({pending:"待付款",paid:"已付款",shipped:"已发货",completed:"已完成",cancelled:"已取消"})[s]||s,h=()=>te(this,null,function*(){a.value=!0;try{const s={pageNum:v.current,pageSize:v.pageSize,keyword:o.keyword||void 0,gender:o.gender||void 0},l=yield yt(s);r.value=l.list||[],v.total=l.total||0,v.current=l.pageNum||1,v.pageSize=l.pageSize||10}catch(s){console.error("获取用户列表失败:",s),Y.error("获取用户列表失败")}finally{a.value=!1}}),_=s=>{v.current=s.current||1,v.pageSize=s.pageSize||10,h()},w=()=>{v.current=1,h()},I=()=>{o.keyword="",o.gender=null,v.current=1,h()},k=s=>te(this,null,function*(){try{a.value=!0;const l=yield $t(s.id);n.value=l,f.value=!0}catch(l){console.error("获取用户详情失败:",l),Y.error("获取用户详情失败")}finally{a.value=!1}}),M=()=>{f.value=!1,n.value=null},m=s=>{const l=s.userType==="supplier"?"供应商":"消费者",d=s.userType==="supplier"?"消费者":"供应商";fe.confirm({title:"变更用户身份",content:`确定将用户 "${s.nickname}" 的身份从${l}变更为${d}吗？`,okText:"确定",cancelText:"取消",onOk:()=>te(this,null,function*(){try{y.value=!0,yield ht(s.id),Y.success("变更用户身份成功"),h()}catch(x){console.error("变更用户身份失败:",x),Y.error("变更用户身份失败")}finally{y.value=!1}})})},P=s=>{fe.confirm({title:"赠送VIP",content:`确定为用户 "${s.nickname}" 赠送1年VIP会员吗？`,okText:"确定",cancelText:"取消",onOk:()=>te(this,null,function*(){try{y.value=!0,yield St(s.id,12,"管理员赠送VIP"),Y.success("VIP赠送成功"),h()}catch(l){console.error("VIP赠送失败:",l),Y.error("VIP赠送失败")}finally{y.value=!1}})})};return Xe(()=>{h()}),(s,l)=>(D(),R("div",null,[i(c(Be),{bordered:!1,class:"mb-20"},{default:p(()=>[i(c(ct),{model:o,layout:"inline",class:"search-form",onSubmit:ut(w,["prevent"])},{default:p(()=>[i(c(ve),{label:"用户信息"},{default:p(()=>[i(c(pt),{value:o.keyword,"onUpdate:value":l[0]||(l[0]=d=>o.keyword=d),placeholder:"请输入昵称或手机号","allow-clear":""},null,8,["value"])]),_:1}),i(c(ve),{label:"性别"},{default:p(()=>[i(c(gt),{value:o.gender,"onUpdate:value":l[1]||(l[1]=d=>o.gender=d),placeholder:"请选择性别",style:{width:"120px"},"allow-clear":""},{default:p(()=>[i(c(oe),{value:null},{default:p(()=>l[3]||(l[3]=[E("全部")])),_:1}),i(c(oe),{value:"男"},{default:p(()=>l[4]||(l[4]=[E("男")])),_:1}),i(c(oe),{value:"女"},{default:p(()=>l[5]||(l[5]=[E("女")])),_:1}),i(c(oe),{value:"其他"},{default:p(()=>l[6]||(l[6]=[E("其他")])),_:1})]),_:1},8,["value"])]),_:1}),i(c(ve),null,{default:p(()=>[i(c(Te),null,{default:p(()=>[i(c(Me),{type:"primary","html-type":"submit"},{default:p(()=>l[7]||(l[7]=[E("查询")])),_:1}),i(c(Me),{onClick:I},{default:p(()=>l[8]||(l[8]=[E("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i(c(Be),{bordered:!1},{default:p(()=>[l[9]||(l[9]=z("div",{class:"table-header"},[z("div",{class:"table-title"},"小程序用户列表")],-1)),i(c(Ct),{columns:t,"data-source":r.value,loading:a.value,pagination:v,onChange:_,"row-key":"id"},{bodyCell:p(({column:d,record:x})=>[d.key==="avatar"?(D(),ne(c(K),{key:0,src:x.avatar||"/images/default-avatar.png"},null,8,["src"])):W("",!0),d.key==="gender"?(D(),R("span",jt,C(x.gender||"-"),1)):W("",!0),d.key==="vipStatus"?(D(),ne(c(me),{key:2,color:$(x).color},{default:p(()=>[E(C($(x).text),1)]),_:2},1032,["color"])):W("",!0),d.key==="vipExpireDate"?(D(),R(De,{key:3},[x.isVip&&x.vipExpireDate?(D(),R("span",{key:0,class:Oe(b(x).class)},C(g(x.vipExpireDate)),3)):(D(),R("span",Gt,"-"))],64)):W("",!0),d.key==="createdAt"?(D(),R(De,{key:4},[E(C(g(x.createdAt)),1)],64)):W("",!0),d.key==="action"?(D(),ne(c(Te),{key:5},{default:p(()=>[z("a",{onClick:j=>k(x)},"查看",8,Nt),i(c(Ae),{type:"vertical"}),z("a",{onClick:j=>m(x)},"变更身份",8,Rt),i(c(Ae),{type:"vertical"}),z("a",{onClick:j=>P(x)},"赠送VIP",8,Wt)]),_:2},1024)):W("",!0)]),_:1},8,["data-source","loading","pagination"])]),_:1}),i(c(fe),{visible:f.value,"onUpdate:visible":l[2]||(l[2]=d=>f.value=d),title:"用户详情",width:"700px",footer:null,onCancel:M},{default:p(()=>[n.value?(D(),R("div",Ft,[i(c(It),{column:2,bordered:""},{default:p(()=>[i(c(B),{label:"头像",span:2},{default:p(()=>[i(c(K),{src:n.value.avatar||"/images/default-avatar.png",size:64},null,8,["src"])]),_:1}),i(c(B),{label:"昵称"},{default:p(()=>[E(C(n.value.nickname),1)]),_:1}),i(c(B),{label:"性别"},{default:p(()=>[E(C(n.value.gender||"-"),1)]),_:1}),i(c(B),{label:"手机号"},{default:p(()=>[E(C(n.value.phone||"-"),1)]),_:1}),i(c(B),{label:"年龄"},{default:p(()=>[E(C(n.value.age||"-"),1)]),_:1}),i(c(B),{label:"用户类型"},{default:p(()=>[E(C(n.value.userType==="supplier"?"供应商":"消费者"),1)]),_:1}),i(c(B),{label:"VIP状态"},{default:p(()=>[i(c(me),{color:$(n.value).color},{default:p(()=>[E(C($(n.value).text),1)]),_:1},8,["color"])]),_:1}),i(c(B),{label:"VIP到期时间"},{default:p(()=>[n.value.isVip&&n.value.vipExpireDate?(D(),R("span",{key:0,class:Oe(b(n.value).class)},C(g(n.value.vipExpireDate)),3)):(D(),R("span",Ut,"-"))]),_:1}),i(c(B),{label:"注册时间"},{default:p(()=>[E(C(g(n.value.createdAt)),1)]),_:1}),n.value.userType==="supplier"&&n.value.supplierInfo?(D(),ne(c(B),{key:0,label:"供应商信息",span:2},{default:p(()=>[z("div",null,[z("p",null,"公司名称: "+C(n.value.supplierInfo.companyName||"-"),1),z("p",null,"联系人: "+C(n.value.supplierInfo.contactPerson||"-"),1),z("p",null," 联系电话: "+C(n.value.supplierInfo.contactPhone||"-"),1),z("p",null,"公司地址: "+C(n.value.supplierInfo.address||"-"),1),z("p",null," 营业执照: "+C(n.value.supplierInfo.businessLicense||"-"),1)])]),_:1})):W("",!0),i(c(B),{label:"收货地址",span:2},{default:p(()=>[i(c(F),{size:"small","data-source":n.value.Addresses||[],pagination:!1},{renderItem:p(({item:d})=>[i(c(xe),null,{default:p(()=>[z("div",null,[z("div",null,C(d.name)+" "+C(d.phone),1),z("div",null,C(d.province+d.city+d.district+d.detail),1),d.isDefault?(D(),ne(c(me),{key:0,color:"blue"},{default:p(()=>l[10]||(l[10]=[E("默认")])),_:1})):W("",!0)])]),_:2},1024)]),header:p(()=>l[11]||(l[11]=[z("div",null,"收货地址列表",-1)])),empty:p(()=>l[12]||(l[12]=[z("div",null,"暂无收货地址",-1)])),_:1},8,["data-source"])]),_:1}),i(c(B),{label:"订单信息",span:2},{default:p(()=>[i(c(F),{size:"small","data-source":n.value.Orders||[],pagination:!1},{renderItem:p(({item:d})=>[i(c(xe),null,{default:p(()=>[z("div",null,[z("div",null,"订单号: "+C(d.orderNo),1),z("div",null,"金额: ¥"+C(d.totalAmount),1),z("div",null,"状态: "+C(S(d.status)),1),z("div",null,"创建时间: "+C(g(d.createdAt)),1)])]),_:2},1024)]),header:p(()=>l[13]||(l[13]=[z("div",null,"订单列表",-1)])),empty:p(()=>l[14]||(l[14]=[z("div",null,"暂无订单信息",-1)])),_:1},8,["data-source"])]),_:1})]),_:1})])):W("",!0)]),_:1},8,["visible"])]))}}),ta=vt(Xt,[["__scopeId","data-v-80e37e50"]]);export{ta as default};
